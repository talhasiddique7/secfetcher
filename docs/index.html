<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>secfetcher Documentation</title>
  <meta name="description" content="Detailed, modern docs for secfetcher: install, simple/tar modes, ticker & cik filters, latest mode, CLI, API parameters, and troubleshooting.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="bg-orb orb-a"></div>
  <div class="bg-orb orb-b"></div>

  <header class="hero">
    <div class="container hero-inner">
      <div>
        <p class="eyebrow">SEC EDGAR Downloader</p>
        <h1>secfetcher Documentation</h1>
        <p class="lead">Modern Python library for SEC filing downloads with two workflows: direct file download and tar-source download with automatic extraction and cleanup.</p>
        <div class="hero-actions">
          <a class="btn btn-primary" href="#quickstart">Quickstart</a>
          <a class="btn" href="#choose-mode">Choose Mode</a>
          <a class="btn" href="#api">API</a>
          <a class="btn" href="https://pypi.org/project/secfetcher/" target="_blank" rel="noopener">PyPI</a>
        </div>
      </div>
      <button id="themeToggle" class="theme-toggle" type="button" aria-label="Toggle theme">ðŸŒ™ Dark</button>
    </div>
  </header>

  <main class="container layout">
    <nav class="sidebar" aria-label="Doc sections">
      <p class="sidebar-title">Contents</p>
      <a href="#install">Install</a>
      <a href="#quickstart">Quickstart</a>
      <a href="#choose-mode">Choose Mode</a>
      <a href="#filters">Ticker and CIK</a>
      <a href="#latest">Latest Mode</a>
      <a href="#output">Output Layout</a>
      <a href="#cli">CLI</a>
      <a href="#api">API Parameters</a>
      <a href="#examples">Examples</a>
      <a href="#troubleshooting">Troubleshooting</a>
    </nav>

    <article class="content">
      <section id="install" class="card section">
        <h2>Install</h2>
        <p>Install from PyPI:</p>
        <pre class="code"><code>pip install secfetcher</code></pre>
        <p>Imports:</p>
        <pre class="code"><code>from secfetch import download_quarter, download_quarter_tar
# compatibility module
from secfetcher import download_quarter_tar</code></pre>
      </section>

      <section id="quickstart" class="card section">
        <h2>Quickstart</h2>
        <h3>Simple Download</h3>
        <pre class="code"><code>from secfetch import download_quarter

results = download_quarter(
    year=2024,
    quarter=1,
    forms=["10-Q"],
    ticker="AAPL",
    data_dir="data",
)</code></pre>

        <h3>Tar Download + Extract</h3>
        <pre class="code"><code>from secfetcher import download_quarter_tar

results = download_quarter_tar(
    year=2024,
    quarter=1,
    forms=["10-Q"],
    ticker="AAPL",
    data_dir="data",
)</code></pre>
      </section>

      <section id="choose-mode" class="card section">
        <h2>Choose Mode</h2>
        <div class="grid-two">
          <div>
            <h3>Simple (non-tar)</h3>
            <p>Functions: <code>download_quarter</code>, <code>download_year</code></p>
            <ul>
              <li>Downloads selected files directly from SEC folder listing.</li>
              <li>Best for straightforward per-filing file retrieval.</li>
              <li>Supports <code>ticker</code> and <code>cik</code> filtering.</li>
            </ul>
          </div>
          <div>
            <h3>Tar workflow</h3>
            <p>Functions: <code>download_quarter_tar</code>, <code>download_year_tar</code></p>
            <ul>
              <li>Downloads filing tar source from DataMule tar endpoint.</li>
              <li>By default extracts into accession folders and deletes tar artifacts.</li>
              <li>Supports <code>limit</code> and higher default concurrency.</li>
            </ul>
          </div>
        </div>
      </section>

      <section id="filters" class="card section">
        <h2>Ticker and CIK Filtering</h2>
        <p>Both simple and tar workflows support filters. You can pass one value or a list.</p>
        <pre class="code"><code># ticker
download_quarter(year=2024, quarter=1, forms=["8-K"], ticker="AMD")

# cik
download_quarter_tar(year=2024, quarter=1, forms=["10-Q"], cik="320193")

# list
download_year_tar(year=2024, forms=["10-Q"], ticker=["AMD", "NVDA"])</code></pre>
        <p>Ticker mapping uses packaged <code>listed_filer_metadata.csv</code>.</p>
      </section>

      <section id="latest" class="card section">
        <h2>Latest Single Filing Mode</h2>
        <p>Supported in both <code>download_quarter</code> and <code>download_quarter_tar</code>.</p>
        <p>Rules:</p>
        <ul>
          <li>Omit all three: <code>year</code>, <code>quarter</code>, <code>forms</code>.</li>
          <li>Provide at least one of: <code>ticker</code> or <code>cik</code>.</li>
        </ul>
        <pre class="code"><code># simple latest
download_quarter(ticker="AAPL")
download_quarter(cik="320193")

# tar latest
download_quarter_tar(ticker="AAPL")
download_quarter_tar(cik="320193")</code></pre>
      </section>

      <section id="output" class="card section">
        <h2>Output Layout</h2>
        <pre class="code"><code>data/
  filings/
    10-Q/
      0000320193/
        0000320193-24-000069/
          ...documents...
  _state/
    manifest.json</code></pre>
        <p>If you pass a single ticker/cik, folder grouping can use that identifier under the form folder.</p>
      </section>

      <section id="cli" class="card section">
        <h2>CLI</h2>
        <pre class="code"><code>secfetch quarter --year 2024 --quarter 1 --forms 10-Q --ticker AAPL
secfetch year --year 2024 --forms 8-K --cik 320193
python -m secfetch --help</code></pre>
      </section>

      <section id="api" class="card section">
        <h2>API Parameters</h2>
        <h3>Common</h3>
        <ul>
          <li><code>year</code>, <code>quarter</code>, <code>forms</code></li>
          <li><code>ticker</code>, <code>cik</code></li>
          <li><code>data_dir</code>, <code>concurrency</code>, <code>show_progress</code></li>
          <li><code>user_agent</code>, <code>manifest_path</code></li>
        </ul>
        <h3>Tar-specific</h3>
        <ul>
          <li><code>limit</code> (cap number of filings)</li>
          <li><code>extract=True</code> (default; extracts and removes tar files)</li>
          <li><code>tar_provider="datamule"</code> (default)</li>
          <li><code>datamule_api_key</code> (optional)</li>
        </ul>
      </section>

      <section id="examples" class="card section">
        <h2>Detailed Examples</h2>
        <h3>Quarter by ticker, simple</h3>
        <pre class="code"><code>download_quarter(
    year=2024,
    quarter=2,
    forms=["8-K", "10-Q"],
    ticker="MSFT",
    data_dir="data",
    show_progress=True,
)</code></pre>

        <h3>Year by CIK, tar, limited</h3>
        <pre class="code"><code>download_year_tar(
    year=2024,
    forms=["10-Q"],
    cik="320193",
    limit=30,
    data_dir="data",
)</code></pre>

        <h3>Latest single filing, tar</h3>
        <pre class="code"><code>download_quarter_tar(
    ticker="AAPL",
    data_dir="data",
)</code></pre>
      </section>

      <section id="troubleshooting" class="card section">
        <h2>Troubleshooting</h2>
        <ul>
          <li><strong>No results:</strong> verify form type and ticker/cik mapping.</li>
          <li><strong>SEC errors:</strong> set valid <code>SEC_USER_AGENT</code> with contact email.</li>
          <li><strong>Slow download:</strong> tune <code>concurrency</code> and use <code>limit</code> for testing.</li>
          <li><strong>Latest mode error:</strong> provide <code>ticker</code> or <code>cik</code> when omitting year/quarter/forms.</li>
        </ul>
      </section>
    </article>
  </main>

  <footer class="footer">
    <div class="container">
      <p>secfetcher docs. Package: <code>secfetcher</code>. Modules: <code>secfetch</code> and <code>secfetcher</code>.</p>
    </div>
  </footer>

  <script src="script.js"></script>
</body>
</html>
